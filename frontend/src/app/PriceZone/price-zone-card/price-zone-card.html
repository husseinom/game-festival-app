@let zone = pz();
@if(zone){
<mat-card class="pz-card" [class.selected]="isSelected()" [class.editing]="isEditing()">
  <mat-card-header class="card-header" (click)="onCardClick($event)">
    <mat-card-title class="pz-name">{{ zone.name }}</mat-card-title>
  </mat-card-header>

  <mat-card-content class="pz-info" (click)="onCardClick($event)">
    <div class="pz-row">
      <strong>Prix de la table: </strong>
      <span>{{ zone.table_price }} €</span>
    </div>

    <div class="pz-row">
      <strong>Total tables: </strong>
      <span>{{ zone.total_tables || (zone.small_tables + zone.large_tables + zone.city_tables) }}</span>
    </div>

    <div class="pz-row">
      <strong>Zones Plan: </strong>
      <span>
        @if(zone.mapZones && zone.mapZones.length > 0) {
          @for(mapZone of zone.mapZones; track mapZone.id) {
            <div>{{ mapZone.name }}</div>
          }
        } @else {
          <span>Aucune zone Plan</span>
        }
      </span>
    </div>
  </mat-card-content>

  <!-- ✅ Only show actions if user can manage spaces -->
  @if(canManage()) {
    <mat-card-actions class="card-actions">
      @if(canEdit()) {
        <button mat-raised-button color="primary" class="edit-btn" (click)="onEditClick($event)">
          <mat-icon>edit</mat-icon>
          Modifier
        </button>
      }
      <button mat-raised-button color="warn" class="delete-btn" (click)="onDeleteClick($event)">
        <mat-icon>delete</mat-icon>
        Supprimer
      </button>
    </mat-card-actions>
  }
</mat-card>
}