<mat-card class="reservation-card" (click)="onCardClick($event)">
  <!-- Card Header with Status Badges -->
  <mat-card-header class="card-header">
    <div class="badges-row">
      <div class="status-badge" [class]="getStatusClass()">
        {{ statusLabel }}
      </div>
      <div class="invoice-badge" [class]="getInvoiceClass()">
        {{ invoiceStatusLabel }}
      </div>
    </div>
  </mat-card-header>

  <!-- Reservation Info -->
  <mat-card-content class="reservation-info">
    <mat-card-title class="publisher-name">{{ reservation.reservant?.name }}</mat-card-title>
    <mat-card-subtitle class="festival-name">{{ reservation.festival?.name }}</mat-card-subtitle>
    
    <!-- Tables Info -->
    <div class="tables-section">
      <div class="section-header">
        <span class="section-title">Espace reserve</span>
        <span class="tables-badge">{{ totalTables }} tables</span>
      </div>
      
      <ul class="zones-list">
        @for (zone of reservation.zones; track $index) {
          <li class="zone-item">
            <span class="zone-bullet"></span>
            {{ zone.table_count }} x {{ zone.priceZone.name }}
          </li>
        }
        
        @if (!reservation.zones?.length) {
          <li class="zone-item empty">Aucune table selectionnee</li>
        }
      </ul>
      
      @if (reservation.nb_electrical_outlets > 0) {
        <div class="electrical-info">
          {{ reservation.nb_electrical_outlets }} prise(s) electrique(s)
        </div>
      }
    </div>

    <!-- Logistics Progress -->
    <div class="logistics-section">
      <div class="progress-item" [class.done]="reservation.game_list_requested">
        <span class="progress-icon">{{ reservation.game_list_requested ? 'ok' : '-' }}</span>
        Liste demandee
      </div>
      <div class="progress-item" [class.done]="reservation.game_list_received">
        <span class="progress-icon">{{ reservation.game_list_received ? 'ok' : '-' }}</span>
        Liste recue
      </div>
      <div class="progress-item" [class.done]="reservation.games_received">
        <span class="progress-icon">{{ reservation.games_received ? 'ok' : '-' }}</span>
        Jeux recus
      </div>
    </div>

    <!-- Presence Info -->
    <div class="presence-info" [class.presenting]="reservation.is_publisher_presenting">
      <span class="presence-text">
        {{ reservation.is_publisher_presenting ? 'Editeur present' : 'Editeur absent' }}
        @if (reservation.needs_festival_animators) {
          <span class="animator-needed">- Animateurs requis</span>
        }
      </span>
    </div>
  </mat-card-content>

  <!-- Card Actions -->
  <mat-card-actions class="card-actions">
    <div class="price-section">
      <span class="price-label">Total</span>
      <span class="price-amount">
        {{ reservation.final_invoice_amount | currency:'EUR':'symbol':'1.0-0' }}
      </span>
    </div>
    
    <div class="action-buttons">
      @if (reservation.invoice_status === 'PENDING') {
        <button mat-stroked-button class="invoice-btn" (click)="onMarkInvoiced($event)">
          Facturer
        </button>
      }
      @if (reservation.invoice_status === 'INVOICED') {
        <button mat-stroked-button class="paid-btn" (click)="onMarkPaid($event)">
          Paye
        </button>
      }
      <button mat-raised-button color="warn" class="delete-btn" (click)="onDelete($event)">
        Suppr
      </button>
    </div>
  </mat-card-actions>
</mat-card>